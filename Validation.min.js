(function(d){function g(a){if(this.disabled){if(a.validateDisabled)this.disabled=!1,this.setCustomValidity(this.validationMessage),this.disabled=!0}else this.setCustomValidity(""),this.type.toLocaleLowerCase()=="number"&&this.pattern&&!this.value.match(RegExp(this.pattern))&&this.setCustomValidity("pattern mismatch");if(this.validity.valid)a.invalidated&&d(this).removeClass(a.className);else if(a.invalidated)d(this)[(this.validity.valueMissing?"remove":"add")+"Class"](a.className);if(a.form){var b=
a.invalid.indexOf(this);this.validity.valid?b!==-1&&a.invalid.splice(b,1):b===-1&&a.invalid.push(this);a.valid=a.invalid.length===0;d(a.form)[(a.valid?"remove":"add")+"Class"](a.className)}return this.validity.valid}function k(a,b){if(a.__lookupSetter__("validation"))a.validation=b;else{var h=!1,i=function(){return b},f=function(a){b=a},j=function(a){var c=a.target,a=b;a.invalidated=!0;d(c).addClass(a.className);if(a.form){a.valid=!1;var e=a.invalid.indexOf(c);e<=0&&(e===-1&&a.invalid.push(c),d(a.form).addClass(a.className),
c=document.createEvent("Event"),c.initEvent("invalid",!1,!1),a.form.dispatchEvent(c))}};a.__defineGetter__("validation",i);a.__defineSetter__("validation",f);a.addEventListener("input",function(a){h=!0;var c=document.createEvent("Event");c.initEvent((g.call(a.target,b)?"":"in")+"validinput",!0,!0);a.target.dispatchEvent(c)},!1);a.addEventListener("change",function(a){if(!h){var c=document.createEvent("Event");c.initEvent((g.call(a.target,b)?"":"in")+"validchange",!0,!0);a.target.dispatchEvent(c)}h=
!1},!1);if(b.form){b.valid=!0;b.invalid=[];for(var e=a.elements.length;e--;)if(a.elements[e].__defineGetter__("validation",i),a.elements[e].__defineSetter__("validation",f),a.elements[e].addEventListener("invalid",j,!1),!g.call(a.elements[e],b)&&b.valid)b.valid=!1}else a.addEventListener("invalid",j,!1),g.call(a,b)}}function f(){}d.extend(f.prototype,{init:function(a,b){b.form=b.form||(a.form?a.form:null);k(b.form||a,b)}});window.Validation=new f;d.extend(d.fn,{validation:function(a){var b={className:"invalid",
invalidated:!1,validateDisabled:!0},a=typeof a==="object"?d.extend(b,a):b;return this.each(function(b,d){Validation.init(d,a)})}})})(Zepto||jQuery);