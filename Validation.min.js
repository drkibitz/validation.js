(function(c){function d(a){if(this.disabled){if(a.validateDisabled)this.disabled=!1,this.setCustomValidity(this.validationMessage),this.disabled=!0}else this.setCustomValidity(""),this.type.toLocaleLowerCase()=="number"&&this.pattern&&!this.value.match(RegExp(this.pattern))&&this.setCustomValidity("pattern mismatch");if(this.validity.valid)a.invalidated&&c(this).removeClass(a.className);else if(a.invalidated)c(this)[(this.validity.valueMissing?"remove":"add")+"Class"](a.className);if(a.form){var b=
a.invalid.indexOf(this);this.validity.valid?b!==-1&&a.invalid.splice(b,1):b===-1&&a.invalid.push(this);a.valid=a.invalid.length===0;c(a.form)[(a.valid?"remove":"add")+"Class"](a.className)}return this.validity.valid}function i(a){a.invalidated=!0;c(this).addClass(a.className);if(a.form){a.valid=!1;var b=a.invalid.indexOf(this);b<=0&&(b===-1&&a.invalid.push(this),c(a.form).addClass(a.className),b=document.createEvent("Event"),b.initEvent("invalid",!0,!0),a.form.dispatchEvent(b))}}function g(a,b){if(!a.__lookupGetter__("validation")){var c=
function(){return b},h=function(a){i.call(a.target,b)};a.__defineGetter__("validation",c);var f=!1;(b.form||a.nodeName==="input"&&ValidationConstructor.NO_INPUT_TYPES.indexOf(a.type)===-1)&&a.addEventListener("input",function(a){f=!0;var c=document.createEvent("Event");c.initEvent((d.call(a.target,b)?"":"in")+"validinput",!0,!0);a.target.dispatchEvent(c)},!1);a.addEventListener("change",function(a){if(!f){var c=document.createEvent("Event");c.initEvent((d.call(a.target,b)?"":"in")+"validchange",!0,
!0);a.target.dispatchEvent(c)}f=!1},!1);if(b.form){b.valid=!0;b.invalid=[];for(var e=a.elements.length;e--;)if(a.elements[e].__defineGetter__("validation",c),a.elements[e].addEventListener("invalid",h,!1),!d.call(a.elements[e],b)&&b.valid)b.valid=!1}else a.addEventListener("invalid",h,!1),d.call(a,b)}}window.ValidationConstructor=function(){};c.extend(ValidationConstructor,{INVALID_CLASS_NAME:"invalid",NO_INPUT_TYPES:"button,checkbox,hidden,image,submit,radio,reset"});c.extend(ValidationConstructor.prototype,
{initElement:function(a,b){b.form=b.form||a.form&&a.form.nodeName==="FORM"?a.form:null;b.form?g(b.form,b,!0):g(a,b,!1)}});window.Validation=new ValidationConstructor;c.extend(c.fn,{validation:function(a){var b={className:ValidationConstructor.INVALID_CLASS_NAME,invalidated:!1,validateDisabled:!0},a=typeof a==="object"?c.extend(b,a):b;return this.each(function(b,c){Validation.initElement(c,a)})}})})(Zepto||jQuery);